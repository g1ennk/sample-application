version: 0.0
os: linux

# 파일 복사 설정
files:
  # .jar 파일만 app 디렉토리로 복사
  - source: backend-0.0.1-SNAPSHOT.jar
    destination: /home/ubuntu/app

# 배포 단계별로 실행할 스크립트 정의
hooks:
  BeforeInstall:
    # 설치 전 실행: 예) 기존 앱 중지, 파일 정리 등
    - location: scripts/before_install.sh
      timeout: 300
      runas: ubuntu

  AfterInstall:
    # 파일 복사 이후 실행: 권한 설정, 환경 설정 등
    - location: scripts/after_install.sh
      timeout: 300
      runas: ubuntu

  ApplicationStart:
    # 앱 실행 스크립트 (보통 java -jar 등)
    - location: scripts/start.sh
      timeout: 300
      runas: ubuntu

  ValidateService:
    # 앱이 정상적으로 실행됐는지 확인하는 스크립트
    - location: scripts/validate.sh
      timeout: 300
      runas: ubuntu
